---
// dashboard.astro - Dashboard mit Backend-Authentifizierungsprüfung
import Layout from '../layouts/Layout.astro';

// Die backendUrl sollte auf deine Go-Backend-URL zeigen
const backendUrl = import.meta.env.PUBLIC_BACKEND_URL || 'http://localhost:8080';

// Prüfen, ob der Benutzer authentifiziert ist
// Dies würde normalerweise durch eine API-Anfrage an das Backend erfolgen
// Für dieses Beispiel simulieren wir eine Weiterleitung, wenn keine Auth vorhanden ist
const isAuthenticated = Astro.cookies.has('token');

if (!isAuthenticated) {
    return Astro.redirect('/login');
}

// Hier würden wir eigentlich Benutzerdaten vom Backend abrufen
// Für dieses Beispiel verwenden wir Platzhalterdaten
const userData = {
    firstName: "Admin",
    lastName: "User",
    role: "admin"
};
---

<Layout title="Dashboard - PeopleFlow">
    <div class="min-h-screen bg-gray-100">
        <!-- Header -->
        <header class="bg-white shadow">
            <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8 flex justify-between items-center">
                <h1 class="text-3xl font-bold tracking-tight text-gray-900">Dashboard</h1>
                <div class="flex items-center space-x-4">
                    <span class="text-sm text-gray-600">Angemeldet als {userData.role}</span>
                    <a href={`${backendUrl}/logout`} class="text-sm text-[#22C55E] hover:text-[#15803D]">Abmelden</a>
                </div>
            </div>
        </header>

        <!-- Hauptinhalt -->
        <main>
            <div class="mx-auto max-w-7xl py-6 sm:px-6 lg:px-8">
                <div class="px-4 py-6 sm:px-0">
                    <div class="rounded-lg border-4 border-dashed border-gray-200 p-6 h-96 flex items-center justify-center">
                        <div class="text-center">
                            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Willkommen im PeopleFlow Dashboard</h2>
                            <p class="text-gray-600">Diese Seite wird noch entwickelt. Weitere Komponenten werden bald hinzugefügt.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</Layout>